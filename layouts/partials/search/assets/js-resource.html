{{- $js := resources.Get "search/js/index.ts" }}
{{/* The SVG icons. */}}
{{- $icons := dict
  "page" (partial "icons/icon" (dict "vendor" "bootstrap" "name" "file-earmark-richtext" "width" "1.5rem" "height" "1.5rem"))
  "heading" (partial "icons/icon" (dict "vendor" "bootstrap" "name" "hash" "width" "1.5rem" "height" "1.5rem"))
  "meta" (partial "icons/icon" (dict "vendor" "bootstrap" "name" "info-circle" "width" "1.5rem" "height" "1.5rem"))
}}
{{- if default true .Site.Params.search.index_all_pages }}
  {{- $icons = merge $icons (dict
    "home" (partial "icons/icon" (dict "vendor" "bootstrap" "name" "house" "width" "1.5rem" "height" "1.5rem"))
    "section" (partial "icons/icon" (dict "vendor" "bootstrap" "name" "list" "width" "1.5rem" "height" "1.5rem"))
    "term" (partial "icons/icon" (dict "vendor" "bootstrap" "name" "tag" "width" "1.5rem" "height" "1.5rem"))
    "taxonomy" (partial "icons/icon" (dict "vendor" "bootstrap" "name" "tags" "width" "1.5rem" "height" "1.5rem")))
  }}
{{- end }}
{{/* Index files URL. */}}
{{- $indices := slice }}
{{- range .Sites }}
  {{- with .Home.OutputFormats.Get "SearchIndex" }}
    {{- $indices = $indices | append .RelPermalink }}
  {{- end }}
{{- end }}
{{- $defaultParams := partialCached "search/functions/params" . }}
{{- $params := merge $defaultParams (dict
  "icons" $icons
  "indices" $indices
  )
}}
{{- $options := dict
  "targetPath" "js/search.js"
  "minify" hugo.IsProduction
  "params" $params
}}
{{- $js = $js | js.Build $options }}
{{- return $js -}}
